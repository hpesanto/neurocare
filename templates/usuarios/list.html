{% extends 'base.html' %}

{% block content %}
<h2>Usuários</h2>

<div class="view-controls" style="margin:12px 0;display:flex;gap:8px;align-items:center;">
    <div>
        <button id="viewTable" class="button">Tabela</button>
        <button id="viewCards" class="button">Cartões</button>
    </div>
    <div style="margin-left:auto">
        <input id="usersSearch" placeholder="Pesquisar por nome..."
            style="padding:6px 8px;border-radius:6px;border:1px solid #ddd;" />
    </div>
</div>

<div class="list-container table-mode">
    <table id="usersTable" class="table users-table">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Login</th>
                <th>Email</th>
                <th>Ativo</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for u in usuarios %}
            {% include 'usuarios/row.html' with usuario=u %}
            {% empty %}
            <tr>
                <td colspan="5">Nenhum usuário cadastrado.</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5" style="text-align:right;">
                    <button id="btnNew" class="btn" data-url="{% url 'usuarios:create' %}">Novo</button>
                </td>
            </tr>
        </tfoot>
    </table>
</div>

<div class="cards-container" style="display:none;gap:12px;margin-top:12px;">
    {% for u in usuarios %}
    {% include 'usuarios/card.html' with usuario=u %}
    {% empty %}
    <div>Nenhum usuário cadastrado.</div>
    {% endfor %}
</div>

<div id="usuarioModal" class="modal" style="display:none;">
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="modal-dialog" id="modalDialog">
        <div id="modalContent"></div>
        <div id="modalSpinner" style="display:none;">
            <div style="padding:24px;text-align:center">
                <div class="spinner"
                    style="width:36px;height:36px;border:4px solid #ccc;border-top-color:#333;border-radius:50%;margin:0 auto 8px auto;animation:spin 1s linear infinite">
                </div>
                <div>Carregando...</div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
{% load static %}
<script src="{% static 'usuarios/usuarios.js' %}"></script>
{% endblock %}